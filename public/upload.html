<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" type="text/css" href="style.css"/>
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Questrial"/>
<link rel="icon" type="image/png" href="favicon.png"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<title>Bleippsons</title>

<style></style>
</head>

<body>

<!-- Navigation -->
<nav>
    <ul class="w3-navbar w3-black">
        <li><a href="index.html">Home</a></li>
        <li><a href="welcome.html">Welcome</a></li>
        <li><a href="memories.html">Memories</a></li>
        <li><a href="#" style="font-weight:bold">Upload</a></li>
    </ul>
</nav>


<!-- Upload -->
<div id="upload-headline">
    <div class="container">
        <div>
            <h1><span><br><br>Show us yours!</span></h1>
            <p>always room for more Bleippson memories</p>
            <input id="memory-title" type="text" placeholder="memory title"></input><br>
            <!-- <input id="memory-image" type="text" placeholder="enter memory title"/><br> -->
            <input type="date" id="memory-date" value="2023-03-23"></input><br>
            <input id="memory-content" type="text" placeholder="memory description"/></input><br><br>
            <button id="upload-button" class="small-button">upload</button>
            <p>(coming soon)</p>          
        </div>
    </div>
</div>


<!-- Footer -->
<footer id="footer">
    <div class="container" style="text-align:center">
        <p>Bleippsons | 2023</p>
    </div>
</footer>



</body>

<script>
//when page has fully rendered then execute this code
$(document).ready(function () {

    //POST /memories to Cosmic
    $("#upload-button").click(function (element) {
        
        var memoryTitle = $("#memory-title").val();
        var memoryImage;
        var memoryDate = $("#memory-date").val(); // check there isn't a .date() or something I should be using!
        var memoryContent = $("#memory-content").val();

        var memoryParams = {
            title: memoryTitle,
            type_slug: 'memories',
            content: memoryContent,
            metafields: [{
                key: 'headline',
                // title: 'Headline',
                type: 'text',
                value: memoryTitle                
            }, {
                key: 'memory_date',
                // title: 'Memory Date',
                type: 'date',
                value: memoryDate
            }]
        };

        var memoryParamsJson = JSON.stringify(memoryParams);
        console.log('memoryParamsJson: ' + memoryParamsJson);

        var apiPost = "https://api.cosmicjs.com/v1/matttea-blog-app/add-object";
        // $.post(apiPost, memoryParams); // commented out until I fix the metafield upload bug
        $("#memory-title").val(''); // to empty all input fields after upload
        // $("#memory-image").val('');
        $("#memory-date").val('');
        $("#memory-content").val('');

        // NOT ADDING ANY METAFIELDS IN POST ROUTE
        // ALSO even with a default date, still returning error of memory_date of null (showing null metafelds and metadata)
        // TODO make menu smaller or roll up when in narrow viewport
        // TODO adjust text sizing on upload page in narrow viewport <p> text is bigger than header
    });

});


</script>



</html>